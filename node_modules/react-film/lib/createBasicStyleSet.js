"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _glamor = require("glamor");

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var DOT_BOX_SIZE = 20;
var DOT_SIZE = 6;

var createDotsBoxCSS = function createDotsBoxCSS(_ref) {
  var height = _ref.height;
  return (0, _glamor.css)({
    alignItems: 'center',
    bottom: 0,
    height: height,
    justifyContent: 'center',
    width: '100%'
  });
};

var createDotsItemCSS = function createDotsItemCSS(_ref2) {
  var boxSize = _ref2.boxSize,
      size = _ref2.size;
  return (0, _glamor.css)({
    alignItems: 'center',
    display: 'flex',
    height: boxSize,
    justifyContent: 'center',
    width: boxSize,
    '& > input': {
      cursor: 'pointer',
      height: '100%',
      left: 0,
      margin: 0,
      opacity: 0,
      position: 'absolute',
      top: 0,
      width: '100%'
    },
    '& > div': {
      background: 'rgba(0, 0, 0, .2)',
      borderRadius: size / 2,
      height: size,
      width: size
    },
    '&:hover > div, & > input:focus + div': {
      background: 'rgba(0, 0, 0, .4)'
    },
    '& > input:active + div': {
      background: 'rgba(0, 0, 0, .8)'
    },
    '& > input:checked:not(:active) + div': {
      background: 'rgba(0, 0, 0, .6)'
    }
  });
};

var FLIPPER_BOX_WIDTH = 60;
var FLIPPER_SIZE = 40;

var createFlipperBoxCSS = function createFlipperBoxCSS(_ref3) {
  var boxWidth = _ref3.boxWidth,
      size = _ref3.size;
  return (0, _glamor.css)({
    background: 'Transparent',
    cursor: 'pointer',
    height: '100%',
    position: 'absolute',
    top: 0,
    width: boxWidth,
    '& > div.slider': {
      alignItems: 'center',
      display: 'flex',
      height: '100%',
      justifyContent: 'center',
      position: 'absolute',
      top: 0,
      width: '100%',
      '& > div': {
        backgroundColor: 'rgba(0, 0, 0, .6)',
        borderRadius: '50%',
        color: 'rgba(255, 255, 255, .6)',
        fontFamily: ['Consolas', 'monospace'].map(function (font) {
          return "'".concat(font, "'");
        }).join(', '),
        fontSize: 16,
        height: size,
        lineHeight: "".concat(size, "px"),
        transitionProperty: 'background-color',
        transitionDuration: '100ms',
        width: size
      }
    },
    '&:hover, &:focus': {
      '& > div.slider > div': {
        backgroundColor: 'rgba(0, 0, 0, .8)',
        color: 'rgba(255, 255, 255, .8)',
        transitionDuration: 0
      }
    },
    '&:active > div.slider > div': {
      backgroundColor: 'Black',
      color: 'White',
      transitionDuration: 0
    }
  });
};

var createLeftFlipperCSS = function createLeftFlipperCSS(options) {
  return (0, _glamor.css)({
    left: 0,
    '& > div.slider': {
      left: 0
    }
  }, createFlipperBoxCSS(options));
};

var createRightFlipperCSS = function createRightFlipperCSS(options) {
  return (0, _glamor.css)({
    right: 0,
    '& > div.slider': {
      right: 0
    }
  }, createFlipperBoxCSS(options));
};

var SCROLL_BAR_HEIGHT = 8;
var SCROLL_BAR_MARGIN = 4;

var createScrollBarBoxCSS = function createScrollBarBoxCSS(_ref4) {
  var height = _ref4.height,
      margin = _ref4.margin;
  return (0, _glamor.css)({
    bottom: 0,
    padding: margin,
    position: 'absolute',
    transitionDelay: '1s',
    transitionDuration: '300ms',
    transitionProperty: 'bottom',
    width: '100%'
  });
};

var createScrollBarHandlerCSS = function createScrollBarHandlerCSS(_ref5) {
  var height = _ref5.height,
      margin = _ref5.margin;
  return (0, _glamor.css)({
    backdropFilter: 'blur(4px)',
    background: 'rgba(255, 255, 255, .4)',
    borderRadius: height / 2,
    height: height
  });
};

function _default() {
  var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      _ref6$autoHide = _ref6.autoHide,
      autoHide = _ref6$autoHide === void 0 ? true : _ref6$autoHide,
      _ref6$dotBoxSize = _ref6.dotBoxSize,
      dotBoxSize = _ref6$dotBoxSize === void 0 ? DOT_BOX_SIZE : _ref6$dotBoxSize,
      _ref6$dotSize = _ref6.dotSize,
      dotSize = _ref6$dotSize === void 0 ? DOT_SIZE : _ref6$dotSize,
      _ref6$flipperBoxWidth = _ref6.flipperBoxWidth,
      flipperBoxWidth = _ref6$flipperBoxWidth === void 0 ? FLIPPER_BOX_WIDTH : _ref6$flipperBoxWidth,
      _ref6$flipperSize = _ref6.flipperSize,
      flipperSize = _ref6$flipperSize === void 0 ? FLIPPER_SIZE : _ref6$flipperSize,
      _ref6$scrollBarHeight = _ref6.scrollBarHeight,
      scrollBarHeight = _ref6$scrollBarHeight === void 0 ? SCROLL_BAR_HEIGHT : _ref6$scrollBarHeight,
      _ref6$scrollBarMargin = _ref6.scrollBarMargin,
      scrollBarMargin = _ref6$scrollBarMargin === void 0 ? SCROLL_BAR_MARGIN : _ref6$scrollBarMargin;

  var styles = {
    carousel: '',
    dotsBox: createDotsBoxCSS({
      height: dotBoxSize
    }),
    dotsItem: createDotsItemCSS({
      boxSize: dotBoxSize,
      size: dotSize
    }),
    leftFlipper: createLeftFlipperCSS({
      boxWidth: flipperBoxWidth,
      size: flipperSize
    }),
    rightFlipper: createRightFlipperCSS({
      boxWidth: flipperBoxWidth,
      size: flipperSize
    }),
    scrollBarBox: createScrollBarBoxCSS({
      height: scrollBarHeight,
      margin: scrollBarMargin
    }),
    scrollBarHandler: createScrollBarHandlerCSS({
      height: scrollBarHeight,
      margin: scrollBarMargin
    })
  }; // This is for overriding existing rules with auto-hide CSS transitions

  if (autoHide) {
    var _hoverScrolling;

    var flipperOverrides = {
      position: 'absolute',
      top: 0,
      transitionDelay: '1s',
      transitionDuration: '300ms'
    };
    styles.leftFlipper = (0, _glamor.css)(styles.leftFlipper, {
      '& > div.slider': _objectSpread({}, flipperOverrides, {
        left: -50,
        transitionProperty: 'left'
      }),
      '&:focus > div.slider': {
        left: 0,
        transitionDelay: '0s'
      }
    });
    styles.rightFlipper = (0, _glamor.css)(styles.rightFlipper, {
      '& > div.slider': _objectSpread({}, flipperOverrides, {
        right: -50,
        transitionProperty: 'right'
      }),
      '&:focus > div.slider': {
        right: 0,
        transitionDelay: '0s'
      }
    });
    styles.scrollBarBox = (0, _glamor.css)(styles.scrollBarBox, {
      bottom: -30,
      transitionDelay: '1s',
      transitionDuration: '300ms',
      transitionProperty: 'bottom'
    }); // The auto-hide state is defined in arch-style (carousel) for its `hover` pseudo class

    styles.carousel = (0, _glamor.css)({
      '&:hover, &.scrolling': (_hoverScrolling = {}, _defineProperty(_hoverScrolling, "& .".concat(styles.scrollBarBox + '', ", & .").concat(styles.leftFlipper + '', " > div.slider, & .").concat(styles.rightFlipper + '', " > div.slider"), {
        // Controls show up as soon as the user hover on it
        transitionDelay: '0s'
      }), _defineProperty(_hoverScrolling, "& .".concat(styles.scrollBarBox + ''), {
        bottom: 0
      }), _defineProperty(_hoverScrolling, "& .".concat(styles.leftFlipper + '', " > div.slider"), {
        left: 0
      }), _defineProperty(_hoverScrolling, "& .".concat(styles.rightFlipper + '', " > div.slider"), {
        right: 0
      }), _hoverScrolling)
    });
  }

  return styles;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVCYXNpY1N0eWxlU2V0LmpzIl0sIm5hbWVzIjpbIkRPVF9CT1hfU0laRSIsIkRPVF9TSVpFIiwiY3JlYXRlRG90c0JveENTUyIsImhlaWdodCIsImFsaWduSXRlbXMiLCJib3R0b20iLCJqdXN0aWZ5Q29udGVudCIsIndpZHRoIiwiY3JlYXRlRG90c0l0ZW1DU1MiLCJib3hTaXplIiwic2l6ZSIsImRpc3BsYXkiLCJjdXJzb3IiLCJsZWZ0IiwibWFyZ2luIiwib3BhY2l0eSIsInBvc2l0aW9uIiwidG9wIiwiYmFja2dyb3VuZCIsImJvcmRlclJhZGl1cyIsIkZMSVBQRVJfQk9YX1dJRFRIIiwiRkxJUFBFUl9TSVpFIiwiY3JlYXRlRmxpcHBlckJveENTUyIsImJveFdpZHRoIiwiYmFja2dyb3VuZENvbG9yIiwiY29sb3IiLCJmb250RmFtaWx5IiwibWFwIiwiZm9udCIsImpvaW4iLCJmb250U2l6ZSIsImxpbmVIZWlnaHQiLCJ0cmFuc2l0aW9uUHJvcGVydHkiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJjcmVhdGVMZWZ0RmxpcHBlckNTUyIsIm9wdGlvbnMiLCJjcmVhdGVSaWdodEZsaXBwZXJDU1MiLCJyaWdodCIsIlNDUk9MTF9CQVJfSEVJR0hUIiwiU0NST0xMX0JBUl9NQVJHSU4iLCJjcmVhdGVTY3JvbGxCYXJCb3hDU1MiLCJwYWRkaW5nIiwidHJhbnNpdGlvbkRlbGF5IiwiY3JlYXRlU2Nyb2xsQmFySGFuZGxlckNTUyIsImJhY2tkcm9wRmlsdGVyIiwiYXV0b0hpZGUiLCJkb3RCb3hTaXplIiwiZG90U2l6ZSIsImZsaXBwZXJCb3hXaWR0aCIsImZsaXBwZXJTaXplIiwic2Nyb2xsQmFySGVpZ2h0Iiwic2Nyb2xsQmFyTWFyZ2luIiwic3R5bGVzIiwiY2Fyb3VzZWwiLCJkb3RzQm94IiwiZG90c0l0ZW0iLCJsZWZ0RmxpcHBlciIsInJpZ2h0RmxpcHBlciIsInNjcm9sbEJhckJveCIsInNjcm9sbEJhckhhbmRsZXIiLCJmbGlw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LENBQUNNLFlBQVAsR0FBc0IsRUFEaEMsa0JBQzRDTixNQUFNLENBQUNJLFdBQVAsR0FBcUIsRUFEakUsK0JBQzBGSixNQUFNLENBQUNLLFlBQVAsR0FBc0IsRUFEaEgsb0JBQ3FJO0FBQ2pJO0FBQ0FmLFFBQUFBLGVBQWUsRUFBRTtBQUZnSCxPQURySSxpREFNVVUsTUFBTSxDQUFDTSxZQUFQLEdBQXNCLEVBTmhDLEdBTXdDO0FBQ3BDckQsUUFBQUEsTUFBTSxFQUFFO0FBRDRCLE9BTnhDLGlEQVVVK0MsTUFBTSxDQUFDSSxXQUFQLEdBQXFCLEVBVi9CLG9CQVVvRDtBQUNoRDNDLFFBQUFBLElBQUksRUFBRTtBQUQwQyxPQVZwRCxpREFjVXVDLE1BQU0sQ0FBQ0ssWUFBUCxHQUFzQixFQWRoQyxvQkFjcUQ7QUFDakRwQixRQUFBQSxLQUFLLEVBQUU7QUFEMEMsT0FkckQ7QUFEb0IsS0FBSixDQUFsQjtBQW9CRDs7QUFFRCxTQUFPZSxNQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdnbGFtb3InO1xuXG5jb25zdCBET1RfQk9YX1NJWkUgPSAyMDtcbmNvbnN0IERPVF9TSVpFID0gNjtcblxuY29uc3QgY3JlYXRlRG90c0JveENTUyA9ICh7IGhlaWdodCB9KSA9PiBjc3Moe1xuICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgYm90dG9tOiAwLFxuICBoZWlnaHQsXG4gIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgd2lkdGg6ICcxMDAlJ1xufSk7XG5cbmNvbnN0IGNyZWF0ZURvdHNJdGVtQ1NTID0gKHsgYm94U2l6ZSwgc2l6ZSB9KSA9PiBjc3Moe1xuICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICBoZWlnaHQ6IGJveFNpemUsXG4gIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgd2lkdGg6IGJveFNpemUsXG5cbiAgJyYgPiBpbnB1dCc6IHtcbiAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICBsZWZ0OiAwLFxuICAgIG1hcmdpbjogMCxcbiAgICBvcGFjaXR5OiAwLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICB3aWR0aDogJzEwMCUnXG4gIH0sXG5cbiAgJyYgPiBkaXYnOiB7XG4gICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgLjIpJyxcbiAgICBib3JkZXJSYWRpdXM6IHNpemUgLyAyLFxuICAgIGhlaWdodDogc2l6ZSxcbiAgICB3aWR0aDogc2l6ZVxuICB9LFxuXG4gICcmOmhvdmVyID4gZGl2LCAmID4gaW5wdXQ6Zm9jdXMgKyBkaXYnOiB7XG4gICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgLjQpJ1xuICB9LFxuXG4gICcmID4gaW5wdXQ6YWN0aXZlICsgZGl2Jzoge1xuICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIC44KSdcbiAgfSxcblxuICAnJiA+IGlucHV0OmNoZWNrZWQ6bm90KDphY3RpdmUpICsgZGl2Jzoge1xuICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIC42KSdcbiAgfVxufSk7XG5cbmNvbnN0IEZMSVBQRVJfQk9YX1dJRFRIID0gNjA7XG5jb25zdCBGTElQUEVSX1NJWkUgPSA0MDtcblxuY29uc3QgY3JlYXRlRmxpcHBlckJveENTUyA9ICh7IGJveFdpZHRoLCBzaXplIH0pID0+IGNzcyh7XG4gIGJhY2tncm91bmQ6ICdUcmFuc3BhcmVudCcsXG4gIGN1cnNvcjogJ3BvaW50ZXInLFxuICBoZWlnaHQ6ICcxMDAlJyxcbiAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIHRvcDogMCxcbiAgd2lkdGg6IGJveFdpZHRoLFxuXG4gICcmID4gZGl2LnNsaWRlcic6IHtcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgaGVpZ2h0OiAnMTAwJScsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICB3aWR0aDogJzEwMCUnLFxuXG4gICAgJyYgPiBkaXYnOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsIDAsIDAsIC42KScsXG4gICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIC42KScsXG4gICAgICBmb250RmFtaWx5OiBbJ0NvbnNvbGFzJywgJ21vbm9zcGFjZSddLm1hcChmb250ID0+IGAnJHsgZm9udCB9J2ApLmpvaW4oJywgJyksXG4gICAgICBmb250U2l6ZTogMTYsXG4gICAgICBoZWlnaHQ6IHNpemUsXG4gICAgICBsaW5lSGVpZ2h0OiBgJHsgc2l6ZSB9cHhgLFxuICAgICAgdHJhbnNpdGlvblByb3BlcnR5OiAnYmFja2dyb3VuZC1jb2xvcicsXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb246ICcxMDBtcycsXG4gICAgICB3aWR0aDogc2l6ZVxuICAgIH1cbiAgfSxcblxuICAnJjpob3ZlciwgJjpmb2N1cyc6IHsgJyYgPiBkaXYuc2xpZGVyID4gZGl2Jzoge1xuICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwgMCwgMCwgLjgpJyxcbiAgICBjb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgLjgpJyxcbiAgICB0cmFuc2l0aW9uRHVyYXRpb246IDBcbiAgfSB9LFxuXG4gICcmOmFjdGl2ZSA+IGRpdi5zbGlkZXIgPiBkaXYnOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiAnQmxhY2snLFxuICAgIGNvbG9yOiAnV2hpdGUnLFxuICAgIHRyYW5zaXRpb25EdXJhdGlvbjogMFxuICB9XG59KTtcblxuY29uc3QgY3JlYXRlTGVmdEZsaXBwZXJDU1MgPSBvcHRpb25zID0+IGNzcyh7XG4gIGxlZnQ6IDAsXG5cbiAgJyYgPiBkaXYuc2xpZGVyJzoge1xuICAgIGxlZnQ6IDBcbiAgfVxufSwgY3JlYXRlRmxpcHBlckJveENTUyhvcHRpb25zKSk7XG5cbmNvbnN0IGNyZWF0ZVJpZ2h0RmxpcHBlckNTUyA9IG9wdGlvbnMgPT4gY3NzKHtcbiAgcmlnaHQ6IDAsXG5cbiAgJyYgPiBkaXYuc2xpZGVyJzoge1xuICAgIHJpZ2h0OiAwXG4gIH1cbn0sIGNyZWF0ZUZsaXBwZXJCb3hDU1Mob3B0aW9ucykpO1xuXG5jb25zdCBTQ1JPTExfQkFSX0hFSUdIVCA9IDg7XG5jb25zdCBTQ1JPTExfQkFSX01BUkdJTiA9IDQ7XG5cbmNvbnN0IGNyZWF0ZVNjcm9sbEJhckJveENTUyA9ICh7IGhlaWdodCwgbWFyZ2luIH0pID0+IGNzcyh7XG4gIGJvdHRvbTogMCxcbiAgcGFkZGluZzogbWFyZ2luLFxuICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgdHJhbnNpdGlvbkRlbGF5OiAnMXMnLFxuICB0cmFuc2l0aW9uRHVyYXRpb246ICczMDBtcycsXG4gIHRyYW5zaXRpb25Qcm9wZXJ0eTogJ2JvdHRvbScsXG4gIHdpZHRoOiAnMTAwJSdcbn0pO1xuXG5jb25zdCBjcmVhdGVTY3JvbGxCYXJIYW5kbGVyQ1NTID0gKHsgaGVpZ2h0LCBtYXJnaW4gfSkgPT4gY3NzKHtcbiAgYmFja2Ryb3BGaWx0ZXI6ICdibHVyKDRweCknLFxuICBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAuNCknLFxuICBib3JkZXJSYWRpdXM6IGhlaWdodCAvIDIsXG4gIGhlaWdodDogaGVpZ2h0XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHtcbiAgYXV0b0hpZGUgICAgICAgID0gdHJ1ZSxcbiAgZG90Qm94U2l6ZSAgICAgID0gRE9UX0JPWF9TSVpFLFxuICBkb3RTaXplICAgICAgICAgPSBET1RfU0laRSxcbiAgZmxpcHBlckJveFdpZHRoID0gRkxJUFBFUl9CT1hfV0lEVEgsXG4gIGZsaXBwZXJTaXplICAgICA9IEZMSVBQRVJfU0laRSxcbiAgc2Nyb2xsQmFySGVpZ2h0ID0gU0NST0xMX0JBUl9IRUlHSFQsXG4gIHNjcm9sbEJhck1hcmdpbiA9IFNDUk9MTF9CQVJfTUFSR0lOXG59ID0ge30pIHtcbiAgY29uc3Qgc3R5bGVzID0ge1xuICAgIGNhcm91c2VsICAgICAgICA6ICcnLFxuICAgIGRvdHNCb3ggICAgICAgICA6IGNyZWF0ZURvdHNCb3hDU1MoeyBoZWlnaHQ6IGRvdEJveFNpemUgfSksXG4gICAgZG90c0l0ZW0gICAgICAgIDogY3JlYXRlRG90c0l0ZW1DU1MoeyBib3hTaXplOiBkb3RCb3hTaXplLCBzaXplOiBkb3RTaXplIH0pLFxuICAgIGxlZnRGbGlwcGVyICAgICA6IGNyZWF0ZUxlZnRGbGlwcGVyQ1NTKHsgYm94V2lkdGg6IGZsaXBwZXJCb3hXaWR0aCwgc2l6ZTogZmxpcHBlclNpemUgfSksXG4gICAgcmlnaHRGbGlwcGVyICAgIDogY3JlYXRlUmlnaHRGbGlwcGVyQ1NTKHsgYm94V2lkdGg6IGZsaXBwZXJCb3hXaWR0aCwgc2l6ZTogZmxpcHBlclNpemUgfSksXG4gICAgc2Nyb2xsQmFyQm94ICAgIDogY3JlYXRlU2Nyb2xsQmFyQm94Q1NTKHsgaGVpZ2h0OiBzY3JvbGxCYXJIZWlnaHQsIG1hcmdpbjogc2Nyb2xsQmFyTWFyZ2luIH0pLFxuICAgIHNjcm9sbEJhckhhbmRsZXI6IGNyZWF0ZVNjcm9sbEJhckhhbmRsZXJDU1MoeyBoZWlnaHQ6IHNjcm9sbEJhckhlaWdodCwgbWFyZ2luOiBzY3JvbGxCYXJNYXJnaW4gfSlcbiAgfTtcblxuICAvLyBUaGlzIGlzIGZvciBvdmVycmlkaW5nIGV4aXN0aW5nIHJ1bGVzIHdpdGggYXV0by1oaWRlIENTUyB0cmFuc2l0aW9uc1xuICBpZiAoYXV0b0hpZGUpIHtcbiAgICBjb25zdCBmbGlwcGVyT3ZlcnJpZGVzID0ge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICB0b3A6IDAsXG4gICAgICB0cmFuc2l0aW9uRGVsYXk6ICcxcycsXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb246ICczMDBtcydcbiAgICB9O1xuXG4gICAgc3R5bGVzLmxlZnRGbGlwcGVyID0gY3NzKHN0eWxlcy5sZWZ0RmxpcHBlciwge1xuICAgICAgJyYgPiBkaXYuc2xpZGVyJzoge1xuICAgICAgICAuLi5mbGlwcGVyT3ZlcnJpZGVzLFxuICAgICAgICBsZWZ0OiAtNTAsXG4gICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogJ2xlZnQnLFxuICAgICAgfSxcblxuICAgICAgJyY6Zm9jdXMgPiBkaXYuc2xpZGVyJzoge1xuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0cmFuc2l0aW9uRGVsYXk6ICcwcydcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHN0eWxlcy5yaWdodEZsaXBwZXIgPSBjc3Moc3R5bGVzLnJpZ2h0RmxpcHBlciwge1xuICAgICAgJyYgPiBkaXYuc2xpZGVyJzoge1xuICAgICAgICAuLi5mbGlwcGVyT3ZlcnJpZGVzLFxuICAgICAgICByaWdodDogLTUwLFxuICAgICAgICB0cmFuc2l0aW9uUHJvcGVydHk6ICdyaWdodCdcbiAgICAgIH0sXG5cbiAgICAgICcmOmZvY3VzID4gZGl2LnNsaWRlcic6IHtcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIHRyYW5zaXRpb25EZWxheTogJzBzJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc3R5bGVzLnNjcm9sbEJhckJveCA9IGNzcyhzdHlsZXMuc2Nyb2xsQmFyQm94LCB7XG4gICAgICBib3R0b206IC0zMCxcbiAgICAgIHRyYW5zaXRpb25EZWxheTogJzFzJyxcbiAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogJzMwMG1zJyxcbiAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogJ2JvdHRvbSdcbiAgICB9KTtcblxuICAgIC8vIFRoZSBhdXRvLWhpZGUgc3RhdGUgaXMgZGVmaW5lZCBpbiBhcmNoLXN0eWxlIChjYXJvdXNlbCkgZm9yIGl0cyBgaG92ZXJgIHBzZXVkbyBjbGFzc1xuICAgIHN0eWxlcy5jYXJvdXNlbCA9IGNzcyh7XG4gICAgICAnJjpob3ZlciwgJi5zY3JvbGxpbmcnOiB7XG4gICAgICAgIFtgJiAuJHsgc3R5bGVzLnNjcm9sbEJhckJveCArICcnIH0sICYgLiR7IHN0eWxlcy5sZWZ0RmxpcHBlciArICcnIH0gPiBkaXYuc2xpZGVyLCAmIC4keyBzdHlsZXMucmlnaHRGbGlwcGVyICsgJycgfSA+IGRpdi5zbGlkZXJgXToge1xuICAgICAgICAgIC8vIENvbnRyb2xzIHNob3cgdXAgYXMgc29vbiBhcyB0aGUgdXNlciBob3ZlciBvbiBpdFxuICAgICAgICAgIHRyYW5zaXRpb25EZWxheTogJzBzJ1xuICAgICAgICB9LFxuXG4gICAgICAgIFtgJiAuJHsgc3R5bGVzLnNjcm9sbEJhckJveCArICcnIH1gXToge1xuICAgICAgICAgIGJvdHRvbTogMFxuICAgICAgICB9LFxuXG4gICAgICAgIFtgJiAuJHsgc3R5bGVzLmxlZnRGbGlwcGVyICsgJycgfSA+IGRpdi5zbGlkZXJgXToge1xuICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgfSxcblxuICAgICAgICBbYCYgLiR7IHN0eWxlcy5yaWdodEZsaXBwZXIgKyAnJyB9ID4gZGl2LnNsaWRlcmBdOiB7XG4gICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlcztcbn1cbiJdfQ==