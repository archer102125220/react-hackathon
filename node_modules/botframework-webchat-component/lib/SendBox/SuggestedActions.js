"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.connectSuggestedActions = exports.default = void 0;

var _reactFilm = _interopRequireDefault(require("react-film"));

var _classnames = _interopRequireDefault(require("classnames"));

var _react = _interopRequireDefault(require("react"));

var _connectToWebChat = _interopRequireDefault(require("../connectToWebChat"));

var _SuggestedAction = _interopRequireDefault(require("./SuggestedAction"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function suggestedActionText(_ref) {
  var displayText = _ref.displayText,
      title = _ref.title,
      type = _ref.type,
      value = _ref.value;

  if (type === 'messageBack') {
    return title || displayText;
  } else if (title) {
    return title;
  } else if (typeof value === 'string') {
    return value;
  } else {
    return JSON.stringify(value);
  }
}

var connectSuggestedActions = function connectSuggestedActions() {
  for (var _len = arguments.length, selectors = new Array(_len), _key = 0; _key < _len; _key++) {
    selectors[_key] = arguments[_key];
  }

  return _connectToWebChat.default.apply(void 0, [function (_ref2) {
    var language = _ref2.language,
        suggestedActions = _ref2.suggestedActions;
    return {
      language: language,
      suggestedActions: suggestedActions
    };
  }].concat(selectors));
};

exports.connectSuggestedActions = connectSuggestedActions;

var _default = connectSuggestedActions(function (_ref3) {
  var styleSet = _ref3.styleSet;
  return {
    styleSet: styleSet
  };
})(function (_ref4) {
  var className = _ref4.className,
      styleSet = _ref4.styleSet,
      suggestedActions = _ref4.suggestedActions;
  return !!suggestedActions.length && _react.default.createElement(_reactFilm.default, {
    autoCenter: false,
    className: (0, _classnames.default)(styleSet.suggestedActions + '', className),
    showDots: false,
    styleSet: styleSet.options.suggestedActionsStyleSet
  }, suggestedActions.map(function (_ref5, index) {
    var displayText = _ref5.displayText,
        text = _ref5.text,
        title = _ref5.title,
        type = _ref5.type,
        value = _ref5.value;
    return _react.default.createElement(_SuggestedAction.default, {
      buttonText: suggestedActionText({
        displayText: displayText,
        title: title,
        type: type,
        value: value
      }),
      displayText: displayText,
      key: index,
      text: text,
      type: type,
      value: value
    });
  }));
});

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9TZW5kQm94L1N1Z2dlc3RlZEFjdGlvbnMuanMiXSwibmFtZXMiOlsic3VnZ2VzdGVkQWN0aW9uVGV4dCIsImRpc3BsYXlUZXh0IiwidGl0bGUiLCJ0eXBlIiwidmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwiY29ubmVjdFN1Z2dlc3RlZEFjdGlvbnMiLCJzZWxlY3RvcnMiLCJjb25uZWN0VG9XZWJDaGF0IiwibGFuZ3VhZ2UiLCJzdWdnZXN0ZWRBY3Rpb25zIiwic3R5bGVTZXQiLCJjbGFzc05hbWUiLCJsZW5ndGgiLCJvcHRpb25zIiwic3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0IiwibWFwIiwiaW5kZXgiLCJ0ZXh0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFFQSxTQUFTQSxtQkFBVCxPQUFrRTtBQUFBLE1BQW5DQyxXQUFtQyxRQUFuQ0EsV0FBbUM7QUFBQSxNQUF0QkMsS0FBc0IsUUFBdEJBLEtBQXNCO0FBQUEsTUFBZkMsSUFBZSxRQUFmQSxJQUFlO0FBQUEsTUFBVEMsS0FBUyxRQUFUQSxLQUFTOztBQUNoRSxNQUFJRCxJQUFJLEtBQUssYUFBYixFQUE0QjtBQUMxQixXQUFPRCxLQUFLLElBQUlELFdBQWhCO0FBQ0QsR0FGRCxNQUVPLElBQUlDLEtBQUosRUFBVztBQUNoQixXQUFPQSxLQUFQO0FBQ0QsR0FGTSxNQUVBLElBQUksT0FBT0UsS0FBUCxLQUFpQixRQUFyQixFQUErQjtBQUNwQyxXQUFPQSxLQUFQO0FBQ0QsR0FGTSxNQUVBO0FBQ0wsV0FBT0MsSUFBSSxDQUFDQyxTQUFMLENBQWVGLEtBQWYsQ0FBUDtBQUNEO0FBQ0Y7O0FBRUQsSUFBTUcsdUJBQXVCLEdBQUcsU0FBMUJBLHVCQUEwQjtBQUFBLG9DQUFJQyxTQUFKO0FBQUlBLElBQUFBLFNBQUo7QUFBQTs7QUFBQSxTQUFrQkMseUNBQ2hEO0FBQUEsUUFDRUMsUUFERixTQUNFQSxRQURGO0FBQUEsUUFFRUMsZ0JBRkYsU0FFRUEsZ0JBRkY7QUFBQSxXQUdPO0FBQ0xELE1BQUFBLFFBQVEsRUFBUkEsUUFESztBQUVMQyxNQUFBQSxnQkFBZ0IsRUFBaEJBO0FBRkssS0FIUDtBQUFBLEdBRGdELFNBUTdDSCxTQVI2QyxFQUFsQjtBQUFBLENBQWhDOzs7O2VBV2VELHVCQUF1QixDQUNwQztBQUFBLE1BQUdLLFFBQUgsU0FBR0EsUUFBSDtBQUFBLFNBQW1CO0FBQUVBLElBQUFBLFFBQVEsRUFBUkE7QUFBRixHQUFuQjtBQUFBLENBRG9DLENBQXZCLENBRWI7QUFBQSxNQUNBQyxTQURBLFNBQ0FBLFNBREE7QUFBQSxNQUVBRCxRQUZBLFNBRUFBLFFBRkE7QUFBQSxNQUdBRCxnQkFIQSxTQUdBQSxnQkFIQTtBQUFBLFNBS0EsQ0FBQyxDQUFDQSxnQkFBZ0IsQ0FBQ0csTUFBbkIsSUFDRSw2QkFBQyxrQkFBRDtBQUNFLElBQUEsVUFBVSxFQUFHLEtBRGY7QUFFRSxJQUFBLFNBQVMsRUFBRyx5QkFDVkYsUUFBUSxDQUFDRCxnQkFBVCxHQUE0QixFQURsQixFQUVWRSxTQUZVLENBRmQ7QUFNRSxJQUFBLFFBQVEsRUFBRyxLQU5iO0FBT0UsSUFBQSxRQUFRLEVBQUdELFFBQVEsQ0FBQ0csT0FBVCxDQUFpQkM7QUFQOUIsS0FVSUwsZ0JBQWdCLENBQUNNLEdBQWpCLENBQXFCLGlCQVFuQkMsS0FSbUI7QUFBQSxRQUVqQmpCLFdBRmlCLFNBRWpCQSxXQUZpQjtBQUFBLFFBR2pCa0IsSUFIaUIsU0FHakJBLElBSGlCO0FBQUEsUUFJakJqQixLQUppQixTQUlqQkEsS0FKaUI7QUFBQSxRQUtqQkMsSUFMaUIsU0FLakJBLElBTGlCO0FBQUEsUUFNakJDLEtBTmlCLFNBTWpCQSxLQU5pQjtBQUFBLFdBVW5CLDZCQUFDLHdCQUFEO0FBQ0UsTUFBQSxVQUFVLEVBQ1RKLG1CQUFtQixDQUFDO0FBQUVDLFFBQUFBLFdBQVcsRUFBWEEsV0FBRjtBQUFlQyxRQUFBQSxLQUFLLEVBQUxBLEtBQWY7QUFBc0JDLFFBQUFBLElBQUksRUFBSkEsSUFBdEI7QUFBNEJDLFFBQUFBLEtBQUssRUFBTEE7QUFBNUIsT0FBRCxDQUZ0QjtBQUlFLE1BQUEsV0FBVyxFQUFHSCxXQUpoQjtBQUtFLE1BQUEsR0FBRyxFQUFHaUIsS0FMUjtBQU1FLE1BQUEsSUFBSSxFQUFHQyxJQU5UO0FBT0UsTUFBQSxJQUFJLEVBQUdoQixJQVBUO0FBUUUsTUFBQSxLQUFLLEVBQUdDO0FBUlYsTUFWbUI7QUFBQSxHQUFyQixDQVZKLENBTkY7QUFBQSxDQUZhLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzaWNGaWxtIGZyb20gJ3JlYWN0LWZpbG0nO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgY29ubmVjdFRvV2ViQ2hhdCBmcm9tICcuLi9jb25uZWN0VG9XZWJDaGF0JztcbmltcG9ydCBTdWdnZXN0ZWRBY3Rpb24gZnJvbSAnLi9TdWdnZXN0ZWRBY3Rpb24nO1xuXG5mdW5jdGlvbiBzdWdnZXN0ZWRBY3Rpb25UZXh0KHsgZGlzcGxheVRleHQsIHRpdGxlLCB0eXBlLCB2YWx1ZSB9KSB7XG4gIGlmICh0eXBlID09PSAnbWVzc2FnZUJhY2snKSB7XG4gICAgcmV0dXJuIHRpdGxlIHx8IGRpc3BsYXlUZXh0XG4gIH0gZWxzZSBpZiAodGl0bGUpIHtcbiAgICByZXR1cm4gdGl0bGU7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICB9XG59XG5cbmNvbnN0IGNvbm5lY3RTdWdnZXN0ZWRBY3Rpb25zID0gKC4uLnNlbGVjdG9ycykgPT4gY29ubmVjdFRvV2ViQ2hhdChcbiAgKHtcbiAgICBsYW5ndWFnZSxcbiAgICBzdWdnZXN0ZWRBY3Rpb25zXG4gIH0pID0+ICh7XG4gICAgbGFuZ3VhZ2UsXG4gICAgc3VnZ2VzdGVkQWN0aW9uc1xuICB9KSxcbiAgLi4uc2VsZWN0b3JzXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3RTdWdnZXN0ZWRBY3Rpb25zKFxuICAoeyBzdHlsZVNldCB9KSA9PiAoeyBzdHlsZVNldCB9KVxuKSgoe1xuICBjbGFzc05hbWUsXG4gIHN0eWxlU2V0LFxuICBzdWdnZXN0ZWRBY3Rpb25zXG59KSA9PlxuICAhIXN1Z2dlc3RlZEFjdGlvbnMubGVuZ3RoICYmXG4gICAgPEJhc2ljRmlsbVxuICAgICAgYXV0b0NlbnRlcj17IGZhbHNlIH1cbiAgICAgIGNsYXNzTmFtZT17IGNsYXNzTmFtZXMoXG4gICAgICAgIHN0eWxlU2V0LnN1Z2dlc3RlZEFjdGlvbnMgKyAnJyxcbiAgICAgICAgY2xhc3NOYW1lXG4gICAgICApIH1cbiAgICAgIHNob3dEb3RzPXsgZmFsc2UgfVxuICAgICAgc3R5bGVTZXQ9eyBzdHlsZVNldC5vcHRpb25zLnN1Z2dlc3RlZEFjdGlvbnNTdHlsZVNldCB9XG4gICAgPlxuICAgICAge1xuICAgICAgICBzdWdnZXN0ZWRBY3Rpb25zLm1hcCgoXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlzcGxheVRleHQsXG4gICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluZGV4XG4gICAgICAgICkgPT5cbiAgICAgICAgICA8U3VnZ2VzdGVkQWN0aW9uXG4gICAgICAgICAgICBidXR0b25UZXh0PXtcbiAgICAgICAgICAgICBzdWdnZXN0ZWRBY3Rpb25UZXh0KHsgZGlzcGxheVRleHQsIHRpdGxlLCB0eXBlLCB2YWx1ZSB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzcGxheVRleHQ9eyBkaXNwbGF5VGV4dCB9XG4gICAgICAgICAgICBrZXk9eyBpbmRleCB9XG4gICAgICAgICAgICB0ZXh0PXsgdGV4dCB9XG4gICAgICAgICAgICB0eXBlPXsgdHlwZSB9XG4gICAgICAgICAgICB2YWx1ZT17IHZhbHVlIH1cbiAgICAgICAgICAvPlxuICAgICAgICApXG4gICAgICB9XG4gICAgPC9CYXNpY0ZpbG0+XG4pXG5cbmV4cG9ydCB7IGNvbm5lY3RTdWdnZXN0ZWRBY3Rpb25zIH1cbiJdfQ==